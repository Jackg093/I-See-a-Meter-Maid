<p id="notice"><%= notice %></p>

 <!--I keep breaking it get help-->
<%= image_tag "http://maps.google.com/maps/api/staticmap?size=450x300&sensor=false&zoom=16&markers=#{@location.latitude}%2C#{@location.longitude}" %>
<div id="map-canvas"></div>
   <script type="text/javascript">
      function initialize() {
         console.log('page initialize');
         window.mapOptions = {
           center: { lat:<%=@location.latitude  %>, lng: <%= @location.longitude %>},
           zoom: 8
         };

      //   var goldStar = {
      //     path: 'M 125,5 155,90 245,90 175,145 200,230 125,180 50,230 75,145 5,90 95,90 z',
      //     fillColor: 'red',
      //     fillOpacity: 1.2,
      //     scale: 0.05,
      //     strokeColor: 'black',
      //     strokeWeight: 1.25
      //   };

        // var canvas = document.getElementById('map-canvas');
        // if (!canvas) { 
        //   console.log("no canvas found");
        //   return;
        // }

        // window.map = new google.maps.Map(document.getElementById('map-canvas'),
        //     mapOptions);
      //   var GeoMarker = new GeolocationMarker(map);
      //   GeoMarker.setCircleOptions({fillColor: '#808080'});

      //   window.geomarker = GeoMarker;

 
      //   $("#maptrigger").click(function() {
      //     console.log('clicked trigger');
      //     console.dir(GeoMarker);

      //     map.setCenter(GeoMarker.getPosition());
      //     var bounds = GeoMarker.getBounds();
      //     if (bounds) {
      //       map.fitBounds(bounds);
      //     }

      //     var marker = new google.maps.Marker({
      //       position: map.getCenter(),
      //       icon: goldStar,
      //       map: map
      //     });
      //   })

      //   google.maps.event.addListener(GeoMarker, 'geolocation_error', function(e) {
      //     alert('There was an error obtaining your position. Message: ' + e.message);
      //   });

      //   //GeoMarker.setMap(map);

      //   // console.log('create marker');
      //   // console.dir(map);
      //   // var marker = new google.maps.Marker({
      //   //   position: map.getCenter(),
      //   //   icon: goldStar,
      //   //   map: map
      //   // });

      }

      // //google.maps.event.addDomListener(window, 'load', initialize);
      //$(initialize);
      //$(document).on('page:load', initialize);
      initialize();
   

   // <!-- working code ending here -->
 
// function initialize() {
  // var mapOptions = {
  //   zoom: 4,
  //   center: new google.maps.LatLng(-25.363882, 131.044922)
  // };

  // var map = new google.maps.Map(document.getElementById('map-canvas'),
  //     mapOptions);
// 
  // var goldStar = {
  //   path: 'M 125,5 155,90 245,90 175,145 200,230 125,180 50,230 75,145 5,90 95,90 z',
  //   fillColor: 'red',
  //   fillOpacity: 1.2,
  //   scale: 0.05,
  //   strokeColor: 'black',
  //   strokeWeight: 1.25
  // };

  // var marker = new google.maps.Marker({
  //   position: map.getCenter(),
  //   icon: goldStar,
  //   map: map
  // });

// }








// function star() {
//   var mapOptions5 = {
    
//   center: { lat:<%=@location.latitude  %>, lng: <%= @location.longitude %>},
//     zoom: 4,
//     //center to current location
//   };
// var map = new google.maps.Map(document.getElementById('map-canvas'),
//             mapOptions);
//          var Geomarker = " " ;

//   var goldStar = {
//     path: 'M 125,5 155,90 245,90 175,145 200,230 125,180 50,230 75,145 5,90 95,90 z',
//     fillColor: 'red',
//     fillOpacity: 0.8,
//     scale: 0.4,
//     strokeColor: 'black',
//     strokeWeight: 14
//   };

//   var marker = new google.maps.Marker({
//     position: map.getCenter(),
//     icon: police,
//     map: map
//   });

// }
// $.ready(star)



//working code starting back up here
    </script>
</div>
<h1>
 <button id="maptrigger">Find My Location! </button>  <button id="startrigger">I See a meter-maid! </button>  
</h1>

<h3>Nearby locations</h3>
<ul>
<% for location in @location.nearbys(10) %>
  <li><%= link_to location.address, location %> (<%= location.distance.round(2) %> miles)</li>
<% end %>
</ul>
 

<p>
  <strong>Address:</strong>
  <%= @location.address %>
</p>

<p>
  <strong>Latitude:</strong>
  <%= @location.latitude %>
</p>

<p>
  <strong>Longitude:</strong>
  <%= @location.longitude %>
</p>

 



<%= link_to 'Edit', edit_location_path(@location) %> |
<%= link_to 'Back', locations_path %>
